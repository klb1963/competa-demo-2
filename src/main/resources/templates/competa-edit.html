<!DOCTYPE HTML>
<!--Подключаем шаблонизатор-->
<html lang="en"
      xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
>
<head>
    <title> Competa edit </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
            integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
            integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
            crossorigin="anonymous"></script>
</head>
<body>
<header th:insert="blocks/header.html :: header"></header>

<div class="container mt-5 mb-5">
    <h1>Edit Competa</h1>
    <br>
    <div sec:authorize="isAuthenticated()">Authenticated as <span sec:authentication="name"></span></div>
    <br>

    <!--    <form action="#" th:action="@{/competa/add}" method="post" th:object="${competa}"> // связали форму с объектом competa-->
    <form action="#" th:action="@{/competa/{id}/edit(id=${competa.id})}" th:object="${competa}" method="post">

        <!-- поле выбора типа из выпадающего списка -->
<!--        <select class="form-control" th:field="*{ctypeId}" id="dropDownListCType">-->
<!--            <option value="0"> select type </option>-->
<!--            <option th:each="el:${ctypes}" th:value="${el.id}" th:text="${el.name}" ></option>-->
<!--        </select>-->
<!--        <br><br>-->

        <!-- поле выбора типа с помощью радио-кнопки -->
        <div class="form-check form-check-inline" th:each="el:${ctypes}" >
            <input class="form-check-input" th:value="${el.id}" th:field="*{ctypeId}" th:text="${el.name}" th:checked="${competa.getCtypeName()} == ${el.name}" type="radio" name="${el.name}" id="${el.id}">
        </div>


        <br><br>
        <input type="text" th:value="${competa.title}" th:field="*{title}" name="title" placeholder="Input title"
               class="form-control"><br>
        <input type="text" th:value="${competa.description}" th:field="*{description}" name="description"
               placeholder="Input description" class="form-control"><br>
        <input type="date" th:value="${competa.dateOut}" th:field="*{dateOut}" name="dateOut" class="form-control"
               id="dateOutAdd" placeholder="Date of completion"><br>

        <!-- поле выбора индустрии из выпадающего списка -->
<!--        th:unless ="${competa.ctypeName == 'Art' || competa.ctypeName == 'Sport'}" - так можно скрыть это поле по условию-->
        <select class="form-control" th:field="*{selectedIndustryId}" id="dropDownList">
            <option value="0"> select industry </option>
            <option th:each="el:${industries}" th:value="${el.id}" th:text="${el.name}" ></option>
        </select><br>

        <div class="form-check">
            <input class="form-check-input" th:checked="${competa.status}" th:field="*{status}" name="status"
                   type="checkbox" id="defaultCheck1">
            <!--        th:field="*{competaType}"-->
            <label class="form-check-label" for="defaultCheck1">
                Public
            </label>
        </div>
        <br>
        <button type="submit" class="btn btn-success"> Update</button>
        <a th:href="@{/competa}" class="btn btn-secondary"> Back </a>
    </form>
</div>
<div th:insert="blocks/footer.html :: footer"></div>
</body>
</html>
